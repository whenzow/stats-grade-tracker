<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Track and calculate your academic grades with ease">
    <title>Grade Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Cinzel:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
        <i class="fas fa-sun"></i>
        <i class="fas fa-moon"></i>
        <span class="theme-toggle-text">Dark Mode</span>
    </button>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobile-overlay"></div>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <h1>Grade Tracker</h1>
            </div>
            
            <!-- Course Management Section -->
            <div class="course-management">
            </div>
            
            <nav class="sidebar-menu">
                <a href="#" class="menu-item active" data-tab="guide">
                    <i class="fas fa-book"></i> User Guide
                </a>
                <a href="#" class="menu-item" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <div class="course-selector-container" style="padding: 10px 15px; border-top: 1px solid var(--border-light); border-bottom: 1px solid var(--border-light); margin: 10px 0;">
                    <label for="course-selector" style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--text-primary); font-size: 14px;">Current Course:</label>
                    <select id="course-selector" class="course-selector">
                        <option value="">No courses</option>
                    </select>
                </div>
                <div class="course-selector-container" style="padding: 0 15px 10px 15px;">
                    <label for="course-units" style="display: block; margin-bottom: 5px; font-weight: 500; color: var(--text-primary); font-size: 14px;">Course Units:</label>
                    <input type="number" id="course-units" class="course-units-input" min="0.5" step="0.5" value="3">
                </div>
                <a href="#" class="menu-item" data-tab="setup">
                    <i class="fas fa-cog"></i> Setup Criteria
                </a>
                <a href="#" class="menu-item" data-tab="calculate">
                    <i class="fas fa-calculator"></i> Calculate Grades
                </a>
                <a href="#" class="menu-item" data-tab="results">
                    <i class="fas fa-chart-bar"></i> Results & Analysis
                </a>
                <a href="#" class="menu-item" data-tab="whatif">
                    <i class="fas fa-question-circle"></i> What If Calculator
                </a>
            </nav>
            <hr>
            <div class="sidebar-footer">
                <div class="form-group">
                    <label for="save-title">File Title (for Save/Load):</label>
                    <input type="text" id="save-title" placeholder="Ex. MATH_28">
                </div>
                <button id="download-btn" class="btn btn-primary">
                    <i class="fas fa-download"></i> Save Criteria & Scores
                </button>
                <hr>
                <div class="form-group">
                    <label for="upload-file">Upload Saved File:</label>
                    <input type="file" id="upload-file" accept=".json">
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content">
                <div class="box">
                    <div class="box-header">
                        <h2>Course Dashboard</h2>
                    </div>
                    <div class="box-body">
                        <div id="dashboard-content">
                            <p>Loading courses...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Guide Tab -->
            <div id="guide-tab" class="tab-content active">
                <div class="box">
                    <div class="box-header">
                        <h2>Welcome to Grade Tracker</h2>
                    </div>
                    <div class="box-body">
                        <div class="guide-content">
                            <h3><i class="fas fa-graduation-cap"></i> How to Use This Application</h3>
                            
                            <!-- Step 1 -->
                            <div class="guide-step">
                                <h4><span>1</span> Manage Your Courses</h4>
                                <p>Use the course controls in the sidebar to organize your subjects:</p>
                                <ul>
                                    <li>Select the <strong>current course</strong> from the dropdown.</li>
                                    <li>Set the <strong>units</strong> for that course (used for GWA).</li>
                                    <li>Use <strong>Add / Rename / Delete</strong> to manage multiple courses.</li>
                                    <li>Open the <strong>Dashboard</strong> tab to see all courses and your semester GWA.</li>
                                </ul>
                            </div>

                            <!-- Step 2 -->
                            <div class="guide-step">
                                <h4><span>2</span> Setup Your Grade Criteria</h4>
                                <p><strong>Normal Components:</strong> Add your coursework components like Exercises, Quizzes, Projects, etc.</p>
                                <ul>
                                    <li>Enter the component name (e.g., 'Quizzes')</li>
                                    <li>Set the weight percentage (e.g., 20%)</li>
                                    <li>Click 'Add Component'</li>
                                </ul>
                                <p><strong>Examinations:</strong> Add your exams like Midterm, Quiz Exam, etc.</p>
                                <ul>
                                    <li>Configure exam settings (Final Exam, Exemption conditions)</li>
                                    <li>Set passing percentage for exams</li>
                                    <li>Add each exam with its weight</li>
                                </ul>
                                <p class="warning"><strong>Important:</strong> Make sure the total weight equals 100%!</p>
                            </div>

                            <!-- Step 3 -->
                            <div class="guide-step">
                                <h4><span>3</span> Setup Grade Scale</h4>
                                <p>Define how percentages convert to college grades (e.g., 1.00, 1.25, etc.).</p>
                                <ul>
                                    <li>Use <strong>Set Default UP Grade Scale</strong> for a quick standard setup.</li>
                                    <li>Or manually set the <strong>minimum percentage</strong> for each college grade in the improved table interface.</li>
                                    <li>
                                        Optionally enable <strong>rounding</strong> so scores like 94.55 are treated as 95
                                        when mapping to a college grade.
                                    </li>
                                </ul>
                                <p class="tip"><strong>Tip:</strong> The grade scale table now features a modern design that matches the overall application style!</p>
                            </div>

                            <!-- Step 4 -->
                            <div class="guide-step">
                                <h4><span>4</span> Enter Your Scores</h4>
                                <p>Go to the 'Calculate Grades' tab and input your scores:</p>
                                <ul>
                                    <li><strong>Normal Components:</strong> Add multiple scores for each component (e.g., Quiz 1: 45/50, Quiz 2: 38/40)</li>
                                    <li><strong>Examinations:</strong> Add exam scores in the same way</li>
                                    <li>Use the <strong>'Add Score'</strong> button to add each entry - don't forget to click it!</li>
                                    <li>You can remove scores by selecting rows and clicking 'Remove Selected'</li>
                                    <li>Uncheck 'Include in calculation' to exclude a component temporarily</li>
                                </ul>
                                <p class="warning"><strong>Important:</strong> The app will warn you if you've entered scores but forgot to click "Add Score". Make sure to add all scores before calculating!</p>
                                <p class="tip"><strong>Tip:</strong> You can add scores progressively as you complete requirements!</p>
                            </div>

                            <!-- Step 5 -->
                            <div class="guide-step">
                                <h4><span>5</span> Calculate & Analyze</h4>
                                <p>Click the 'Calculate Final Grade' button to see your results:</p>
                                <ul>
                                    <li>View your final percentage and college grade</li>
                                    <li>See detailed breakdown of all components</li>
                                    <li>Check exemption eligibility (if applicable)</li>
                                    <li>View grade projections for incomplete components</li>
                                </ul>
                            </div>

                            <!-- Step 6 -->
                            <div class="guide-step">
                                <h4><span>6</span> What If Calculator</h4>
                                <p>Explore different grade scenarios using the <strong>What If Calculator</strong>:</p>
                                <ul>
                                    <li><strong>Scenario Mode:</strong> Add or modify scores for components to see what your final grade would be</li>
                                    <li><strong>Target Mode:</strong> Enter a target final grade and see what scores you need to achieve it</li>
                                    <li>Compare your current grade with different scenarios side-by-side</li>
                                    <li>Real-time calculation updates as you add or change scores</li>
                                </ul>
                                <p class="tip"><strong>Tip:</strong> Use this to plan your study strategy! Try different score combinations to see what you need to achieve your target grade.</p>
                            </div>

                            <!-- Step 7 -->
                            <div class="guide-step">
                                <h4><span>7</span> Dashboard & Semester Management</h4>
                                <p>The <strong>Dashboard</strong> tab provides powerful tools for tracking your academic progress:</p>
                                <ul>
                                    <li><strong>Quick Course Entry:</strong> Add courses with just their final grade (non-editable) for quick GWA calculation when you already know the final grade</li>
                                    <li><strong>Semester Management:</strong> Create semesters and organize your courses by academic term</li>
                                    <li><strong>Overall GWA:</strong> See your overall GWA calculated from all courses (regular + quick courses)</li>
                                    <li><strong>Semester GWA:</strong> Track GWA for each semester separately</li>
                                </ul>
                                <p class="tip"><strong>Tip:</strong> Use Quick Course Entry for courses where you already have the final grade and don't want to enter all components from scratch!</p>
                            </div>

                            <!-- Step 8 -->
                            <div class="guide-step">
                                <h4><span>8</span> Save & Load Your Work</h4>
                                <p><strong>Automatic Local Storage:</strong> Your work is automatically saved as you use the app!</p>
                                <ul>
                                    <li>All your data (courses, criteria, scores, grade scales, semesters, and quick courses) is automatically saved to your browser's local storage every 5 seconds</li>
                                    <li>When you return to the app, everything will be restored automatically - no need to reload manually!</li>
                                    <li>Your theme preference (dark/light mode) is also saved automatically</li>
                                    <li>Component include/exclude status is remembered per course</li>
                                </ul>
                                <p><strong>Manual Save & Export:</strong> Enter a file title in the sidebar and click 'Save Criteria & Scores'</p>
                                <ul>
                                    <li>Saves all your criteria, scores, grade scale, semesters, and quick courses</li>
                                    <li>Downloaded as a JSON file that you can backup or transfer to another device</li>
                                    <li>Useful for backing up your work or sharing it between different browsers/computers</li>
                                </ul>
                                <p><strong>Manual Load:</strong> Use 'Upload Saved File' to restore your previous work from a JSON file</p>
                                <ul>
                                    <li>All your settings, scores, semesters, and quick courses will be restored</li>
                                    <li>Perfect for transferring your data to another device or recovering from a backup</li>
                                    <li>Works seamlessly with the automatic local storage - you can use both together!</li>
                                </ul>
                                <p class="tip"><strong>Tip:</strong> The automatic local storage means you rarely need to manually save - your work is always safe! Use manual save/load when you need to backup or transfer your data.</p>
                            </div>

                            <!-- Features -->
                            <div class="guide-features">
                                <h4><i class="fas fa-star"></i> Key Features</h4>
                                <div class="features-grid">
                                    <ul>
                                        <li><i class="fas fa-check-circle"></i> Automatic grade calculations</li>
                                        <li><i class="fas fa-check-circle"></i> Flexible grade criteria setup</li>
                                        <li><i class="fas fa-check-circle"></i> Multiple scores per component</li>
                                        <li><i class="fas fa-check-circle"></i> Exemption eligibility checker</li>
                                        <li><i class="fas fa-check-circle"></i> Grade projections & predictions</li>
                                    </ul>
                                    <ul>
                                        <li><i class="fas fa-check-circle"></i> What If Scenario Calculator</li>
                                        <li><i class="fas fa-check-circle"></i> Quick Course Entry (final grade only)</li>
                                        <li><i class="fas fa-check-circle"></i> Semester Management & Tracking</li>
                                        <li><i class="fas fa-check-circle"></i> Automatic local storage (auto-saves every 5 seconds)</li>
                                        <li><i class="fas fa-check-circle"></i> Manual Save/Load functionality (JSON export/import)</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Quick Start -->
                            <div class="guide-quickstart">
                                <h4><i class="fas fa-rocket"></i> Quick Start</h4>
                                <p><strong>New User?</strong> Follow these steps:</p>
                                <ol>
                                    <li>Pick or create a course in the <strong>sidebar</strong> and set its <strong>units</strong>.</li>
                                    <li>Go to the <strong>'Setup Criteria'</strong> tab and add your components and exams.</li>
                                    <li>In <strong>'College Grade Scale Setup'</strong>, click <strong>'Set Default UP Grade Scale'</strong> or adjust the minimums manually.</li>
                                    <li>Go to the <strong>'Calculate Grades'</strong> tab and enter your scores.</li>
                                    <li>Click <strong>'Calculate Final Grade'</strong> and view results in the <strong>'Results & Analysis'</strong> tab.</li>
                                    <li>Open the <strong>'Dashboard'</strong> tab to see all courses, create semesters, add quick courses, and track your overall <strong>GWA</strong>.</li>
                                    <li>Try the <strong>'What If Calculator'</strong> to experiment with different scores and see what grades you'll get!</li>
                                    <li>Use <strong>Quick Course Entry</strong> in the Dashboard for courses where you already know the final grade!</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Setup Criteria Tab -->
            <div id="setup-tab" class="tab-content">
                <div class="box">
                    <div class="box-header">
                        <h2>Grade Criteria Setup</h2>
                    </div>
                    <div class="box-body">
                        <!-- Normal Components -->
                        <div class="criteria-group">
                            <h4>Normal Components (Exercises, Quizzes, Projects, etc.):</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="component-name">Component Name:</label>
                                    <input type="text" id="component-name" placeholder="Ex. Exercises, Quizzes">
                                </div>
                                <div class="form-group">
                                    <label for="component-weight">Weight (%):</label>
                                    <input type="number" id="component-weight" min="0" max="100" value="0">
                                </div>
                                <div class="form-group">
                                    <button id="add-component" class="btn btn-success">
                                        <i class="fas fa-plus"></i> Add Component
                                    </button>
                                </div>
                            </div>
                            <div id="criteria-table-container"></div>
                            <div id="total-weight-display"></div>
                            <button id="clear-criteria" class="btn btn-warning">
                                <i class="fas fa-trash"></i> Remove Selected Components/Exams
                            </button>
                        </div>

                        <!-- Examinations -->
                        <div class="criteria-group">
                            <h4>Examinations:</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="has-final" checked>
                                        Does this course have a Final Exam?
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label id="has-exemption-label" style="display: none;">
                                        <input type="checkbox" id="has-exemption">
                                        Are there exemption conditions for the Final Exam?
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="passing-exam-percent">Passing Percentage for Exams (%):</label>
                                    <input type="number" id="passing-exam-percent" min="0" max="100" value="60">
                                </div>
                            </div>

                            <div id="exemption-settings" style="display: none;">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="min-exams-passed">Minimum Exams to Pass:</label>
                                        <input type="number" id="min-exams-passed" min="1" value="2">
                                    </div>
                                    <div class="form-group">
                                        <label for="min-prefinal-percent">Minimum Prefinal Standing (%):</label>
                                        <input type="number" id="min-prefinal-percent" min="0" max="100" value="72">
                                    </div>
                                    <div class="form-group">
                                        <label for="final-weight">Final Exam Weight (%):</label>
                                        <input type="number" id="final-weight" min="0" max="100" value="20">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="exam-name">Exam Name:</label>
                                    <input type="text" id="exam-name" placeholder="Ex. Midterm, Prefinals">
                                </div>
                                <div class="form-group">
                                    <label for="exam-weight">Exam Weight (%):</label>
                                    <input type="number" id="exam-weight" min="0" max="100" value="0">
                                </div>
                                <div class="form-group">
                                    <button id="add-exam" class="btn btn-success">
                                        <i class="fas fa-plus"></i> Add Exam
                                    </button>
                                </div>
                            </div>
                            <div id="exam-table-container"></div>
                        </div>
                    </div>
                </div>

                <div class="box">
                    <div class="box-header">
                        <h2>College Grade Scale Setup</h2>
                    </div>
                    <div class="box-body">
                        <h4>Define your college grade scale:</h4>
                        <p style="margin-top: 10px; margin-bottom: 10px;">
                            Set the <strong>minimum percentage</strong> for each college grade. A higher grade's minimum
                            automatically takes precedence (for example, 95 and above counts as 1.00).
                        </p>
                        <div id="grade-scale-editor-container"></div>
                        <div class="form-group" style="margin-top: 10px;">
                            <label>
                                <input type="checkbox" id="grade-rounding">
                                Consider rounding when mapping percentages to grades (e.g., 94.55 â†’ 95)
                            </label>
                        </div>
                        <div class="button-group">
                            <button id="clear-grades" class="btn btn-warning">
                                <i class="fas fa-trash"></i> Clear Grade Scale
                            </button>
                            <button id="set-default-grades" class="btn btn-info">
                                <i class="fas fa-magic"></i> Set Default UP Grade Scale
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calculate Grades Tab -->
            <div id="calculate-tab" class="tab-content">
                <div class="box">
                    <div class="box-header">
                        <h2>Enter Your Scores</h2>
                    </div>
                    <div class="box-body">
                        <div id="score-inputs-container">
                            <p>Please set up your grade criteria first in the Setup tab.</p>
                        </div>
                        <button id="calculate-final" class="btn btn-primary btn-lg">
                            <i class="fas fa-calculator"></i> Calculate Final Grade
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Tab -->
            <div id="results-tab" class="tab-content">
                <div class="value-boxes">
                    <div class="value-box" id="final-percentage-box">
                        <div class="value-box-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="value-box-content">
                            <div class="value-box-value">0%</div>
                            <div class="value-box-subtitle">Final Percentage</div>
                        </div>
                    </div>
                    <div class="value-box" id="college-grade-box">
                        <div class="value-box-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="value-box-content">
                            <div class="value-box-value">No Grade</div>
                            <div class="value-box-subtitle">College Grade</div>
                        </div>
                    </div>
                    <div class="value-box" id="grade-status-box">
                        <div class="value-box-icon">
                            <i class="fas fa-flag"></i>
                        </div>
                        <div class="value-box-content">
                            <div class="value-box-value">No Status</div>
                            <div class="value-box-subtitle">Status</div>
                        </div>
                    </div>
                </div>

                <div class="results-grid">
                    <div class="box">
                        <div class="box-header">
                            <h2>Grade Breakdown</h2>
                        </div>
                        <div class="box-body">
                            <div id="breakdown-table-container"></div>
                        </div>
                    </div>
                    <div class="box">
                        <div class="box-header">
                            <h2>Grade Distribution</h2>
                        </div>
                        <div class="box-body">
                            <canvas id="grade-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="box">
                    <div class="box-header">
                        <h2>Performance Analysis & Projections</h2>
                    </div>
                    <div class="box-body">
                        <div id="performance-analysis-container"></div>
                    </div>
                </div>
            </div>

            <!-- What If Calculator Tab -->
            <div id="whatif-tab" class="tab-content">
                <div class="box">
                    <div class="box-header">
                        <h2>What If Scenario Calculator</h2>
                    </div>
                    <div class="box-body">
                        <p style="margin-bottom: 20px;">
                            Explore different grade scenarios by adding or modifying scores for components. See how your final grade changes in real-time as you enter scores!
                        </p>
                        
                        <!-- Target Grade Mode -->
                        <div class="whatif-mode-selector">
                            <label>
                                <input type="radio" name="whatif-mode" value="scenario" checked>
                                Scenario Mode: Add/modify scores and see what grade you'll get
                            </label>
                            <label>
                                <input type="radio" name="whatif-mode" value="target">
                                Target Mode: Enter target grade and see required scores
                            </label>
                        </div>

                        <!-- Target Grade Input (for reverse calculator) -->
                        <div id="target-grade-section" style="display: none; margin-bottom: 20px;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="target-grade-input">Target Final Grade (%):</label>
                                    <input type="number" id="target-grade-input" min="0" max="100" step="0.01" value="75">
                                </div>
                                <div class="form-group">
                                    <button id="calculate-target" class="btn btn-primary">
                                        <i class="fas fa-calculator"></i> Calculate Required Scores
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Current vs Scenario Comparison -->
                        <div class="whatif-comparison">
                            <div class="comparison-box">
                                <h4><i class="fas fa-chart-line"></i> Current Grade</h4>
                                <div id="current-grade-display" class="grade-display">
                                    <div class="grade-value">--</div>
                                    <div class="grade-label">Final Percentage</div>
                                    <div class="grade-college">--</div>
                                    <div class="grade-label">College Grade</div>
                                </div>
                            </div>
                            <div class="comparison-box">
                                <h4><i class="fas fa-lightbulb"></i> Scenario</h4>
                                <div id="scenario-grade-display" class="grade-display">
                                    <div class="grade-value">--</div>
                                    <div class="grade-label">Final Percentage</div>
                                    <div class="grade-college">--</div>
                                    <div class="grade-label">College Grade</div>
                                </div>
                            </div>
                        </div>

                        <!-- Component Score Inputs -->
                        <div id="whatif-inputs-container">
                            <p>Please set up your grade criteria first in the Setup tab.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>

